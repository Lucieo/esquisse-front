(this["webpackJsonpesquisse-client"]=this["webpackJsonpesquisse-client"]||[]).push([[0],{167:function(e,t,a){},172:function(e,t,a){e.exports=a.p+"static/media/crayons.b8039cd2.jpeg"},174:function(e,t,a){e.exports=a.p+"static/media/loader.1d7626e6.gif"},177:function(e,t,a){e.exports=a.p+"static/media/artist.88839167.gif"},183:function(e,t,a){e.exports=a.p+"static/media/sherlock.bb668a20.png"},184:function(e,t,a){e.exports=a.p+"static/media/wrong.364ca726.png"},185:function(e,t,a){e.exports=a.p+"static/media/lapin.225f5783.png"},200:function(e,t,a){e.exports=a(477)},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},453:function(e,t,a){},454:function(e,t,a){},455:function(e,t,a){},458:function(e,t,a){},462:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},477:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(171),l=a.n(c),o=(a(205),a(7)),i=a(172),s=a.n(i);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=r.a.createElement("path",{d:"m506.234375 215.480469-77-36c-1.324219-.621094-2.769531-.941407-4.234375-.941407h-60.523438v-17.242187c0-19.089844-15.527343-34.617187-34.617187-34.617187-9.625 0-18.339844 3.949218-24.621094 10.308593-6.277343-6.359375-14.996093-10.308593-24.617187-10.308593-9.625 0-18.339844 3.949218-24.621094 10.308593-6.28125-6.359375-14.996094-10.308593-24.617188-10.308593-9.625 0-18.339843 3.949218-24.621093 10.308593-6.28125-6.359375-14.996094-10.308593-24.617188-10.308593-19.089843 0-34.621093 15.527343-34.621093 34.617187v17.242187h-125.753907c-12.003906 0-21.769531 9.765626-21.769531 21.769532v48.460937c0 12.003907 9.765625 21.769531 21.769531 21.769531h77.601563v58.882813c0 .730469.011718 1.460937.035156 2.183594.742188 22.773437 13.851562 44.007812 34.214844 55.425781l23.878906 13.390625v101.578125c0 5.523438 4.480469 10 10 10 5.523438 0 10-4.476562 10-10v-107.441406c0-3.617188-1.953125-6.953125-5.109375-8.722656l-28.988281-16.25c-14.292969-8.015626-23.492188-22.816407-24.007813-38.640626-.015625-.507812-.023437-1.015624-.023437-1.523437v-58.882813h28.152344v1.15625c0 5.523438 4.480468 10 10 10 5.523437 0 10-4.476562 10-10v-110.398437c0-8.0625 6.558593-14.617187 14.621093-14.617187 8.058594 0 14.617188 6.558593 14.617188 14.617187v110.398437c0 5.523438 4.476562 10 10 10 5.523437 0 10-4.476562 10-10v-110.398437c0-8.0625 6.558593-14.617187 14.621093-14.617187 8.058594 0 14.617188 6.554687 14.617188 14.617187v110.398437c0 5.523438 4.476562 10 10 10s10-4.476562 10-10v-110.398437c0-8.0625 6.558594-14.617187 14.617188-14.617187 8.0625 0 14.621093 6.558593 14.621093 14.617187v110.398437c0 5.523438 4.480469 10 10 10 5.523438 0 10-4.476562 10-10v-110.398437c0-8.0625 6.558594-14.617187 14.621094-14.617187 8.058594 0 14.617187 6.558593 14.617187 14.617187v151.234375c0 28.0625-11.574218 55.339844-31.757812 74.835938-1.949219 1.886718-3.054688 4.480468-3.054688 7.191406v67.441406c0 5.523438 4.480469 10 10 10 5.523438 0 10-4.476562 10-10v-63.304688c22.175782-22.992187 34.8125-54.148437 34.8125-86.164062v-41.992188h60.523438c1.464844 0 2.910156-.320312 4.234375-.941406l77-36c3.519531-1.644531 5.765625-5.175781 5.765625-9.058594 0-3.882812-2.246094-7.414062-5.765625-9.058593zm-486.234375 33.289062v-48.460937c0-.976563.792969-1.769532 1.769531-1.769532h32.230469v52h-32.230469c-.976562 0-1.769531-.792968-1.769531-1.769531zm89.367188 1.769531h-35.367188v-52h73.523438v52zm255.109374-52h50.523438v52h-50.523438zm70.523438 46.285157v-40.570313l43.390625 20.285156zm0 0"}),p=r.a.createElement("path",{d:"m255.832031 84.339844c5.519531 0 10-4.480469 10-10v-64.339844c0-5.523438-4.480469-10-10-10-5.523437 0-10 4.476562-10 10v64.339844c0 5.519531 4.476563 10 10 10zm0 0"}),g=r.a.createElement("path",{d:"m178.359375 98.621094c1.953125 1.953125 4.511719 2.929687 7.070313 2.929687 2.558593 0 5.117187-.976562 7.070312-2.929687 3.90625-3.902344 3.90625-10.234375 0-14.140625l-25.628906-25.632813c-3.902344-3.902344-10.234375-3.902344-14.144532 0-3.902343 3.90625-3.902343 10.238282 0 14.144532zm0 0"}),E=r.a.createElement("path",{d:"m326.570312 101.550781c2.558594 0 5.117188-.976562 7.070313-2.929687l25.628906-25.628906c3.90625-3.90625 3.90625-10.238282 0-14.144532-3.90625-3.902344-10.234375-3.902344-14.140625 0l-25.632812 25.632813c-3.902344 3.90625-3.902344 10.238281 0 14.140625 1.953125 1.953125 4.515625 2.929687 7.074218 2.929687zm0 0"}),f=r.a.createElement("path",{d:"m319.671875 492c-2.640625 0-5.210937 1.070312-7.070313 2.929688-1.871093 1.859374-2.929687 4.441406-2.929687 7.070312s1.058594 5.210938 2.929687 7.070312c1.859376 1.859376 4.429688 2.929688 7.070313 2.929688 2.628906 0 5.207031-1.070312 7.066406-2.929688 1.859375-1.859374 2.933594-4.441406 2.933594-7.070312s-1.070313-5.210938-2.933594-7.070312c-1.859375-1.859376-4.4375-2.929688-7.066406-2.929688zm0 0"}),b=function(e){var t=e.svgRef,a=e.title,n=m(e,["svgRef","title"]);return r.a.createElement("svg",u({height:"512pt",viewBox:"0 0 512 512",width:"512pt",ref:t},n),a?r.a.createElement("title",null,a):null,d,p,g,E,f)},v=r.a.forwardRef((function(e,t){return r.a.createElement(b,u({svgRef:t},e))})),h=(a.p,a(206),a(14)),O=a(8),j=a(50),I=a(11),k=a.n(I);a(207);function y(){var e=Object(h.a)(["\nmutation Login($email: String!, $password: String!){\n    login(email: $email, password: $password){\n        token\n        user{\n            email\n            name\n            id\n        }\n    }\n}\n"]);return y=function(){return e},e}var N=k()(y());function w(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],E=p[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),v=(b[0],b[1]),h=Object(O.a)(),I=Object(O.b)(N,{onCompleted:function(e){var t=e.login;localStorage.setItem("esquisse-token","Bearer "+t.token),h.writeData({data:{isLoggedIn:!0}}),window.location.reload()},onError:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[0].toString();n.indexOf("Invalid Login")>-1&&E("C'est pas \xe7a retente ta chance!")}}),k=Object(o.a)(I,2),y=k[0],w=k[1];w.loading,w.error;return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"par ici pour se connecter"),r.a.createElement("p",{className:"red-text",style:{minHeight:25}},g),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y({variables:{email:c,password:u}})}},r.a.createElement("input",{placeholder:"email",type:"email",value:c,onChange:function(e){!function(e,t){t(e);var a=!0,n="";e&&!Object(j.isEmail)(e)&&(a=!1,n="Votre email n'est invalide."),(!e||!u)&&(a=!1),E(n),v(a)}(e.target.value,l)}}),r.a.createElement("input",{type:"password",placeholder:"password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"btn ".concat((!u||!c)&&"disabled"," login__validate")},"Valider",r.a.createElement("i",{className:"material-icons left"},"check")),r.a.createElement("p",{className:"login__switch",onClick:function(){return e.switchMode()}},"Pas de compte? S'inscrire")))}function S(){var e=Object(h.a)(["\nmutation ChangeGameStatus($newStatus:String!, $gameId: ID!){\n    changeGameStatus(gameId:$gameId, newStatus:$newStatus){\n      status\n      id\n    }\n  }\n"]);return S=function(){return e},e}function _(){var e=Object(h.a)(["\nmutation SubmitPage($sketchbookId: ID!, $gameId: ID!, $content: String!, $pageType: String!){\n    submitPage(sketchbookId: $sketchbookId, gameId: $gameId, content: $content, pageType: $pageType){\n        id\n    }\n}\n"]);return _=function(){return e},e}function C(){var e=Object(h.a)(["\nmutation LeaveGame($gameId: ID!){\n    leaveGame(gameId: $gameId){\n        id\n    }\n  }\n"]);return C=function(){return e},e}function A(){var e=Object(h.a)(["\nmutation JoinGame($gameId: ID!){\n    joinGame(gameId: $gameId){\n        id\n    }\n  }\n"]);return A=function(){return e},e}function T(){var e=Object(h.a)(["\nmutation ModifyUser($icon: String!, $name: String!, $iconColor: String!){\n    modifyUser(name: $name, icon: $icon, iconColor: $iconColor){\n        icon,\n        iconColor,\n        name\n    }\n}\n"]);return T=function(){return e},e}function D(){var e=Object(h.a)(["\nmutation SignUp($email: String!, $password: String!, $name: String!){\n    signup(email: $email, password: $password, name: $name){\n        email\n        name\n    }\n}\n"]);return D=function(){return e},e}var G=k()(D()),$=k()(T()),L=k()(A()),U=k()(C()),x=k()(_()),P=k()(S());a(283);function R(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],E=p[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),v=b[0],h=b[1],I=Object(n.useState)(!1),k=Object(o.a)(I,2),y=k[0],N=k[1],w=Object(O.b)(G,{onCompleted:function(){window.location.reload()}}),S=Object(o.a)(w,2),_=S[0],C=S[1],A=(C.loading,C.error,function(e,t,a){a(e);var n=!0,r="";"email"!==t||Object(j.isEmail)(e)?"password"!==t||Object(j.isLength)(e,{min:6})?"name"!==t||Object(j.isLength)(e,{min:6})||(n=!1,r="Choisissez un nom de 6 charact\xe8res minimum."):(n=!1,r="Choisissez un mot de passe de 6 charact\xe8res minimum."):(n=!1,r="Votre email n'est invalide."),(!c||!u||!g)&&(n=!1),h(r),N(n)});return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"se cr\xe9er un compte"),r.a.createElement("p",{className:"red-text",style:{minHeight:25}},v),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),_({variables:{email:c,password:u,name:g}})}},r.a.createElement("input",{placeholder:"nom",value:g,onChange:function(e){A(e.target.value,"name",E)}}),r.a.createElement("input",{placeholder:"email",type:"email",value:c,onChange:function(e){A(e.target.value,"email",l)}}),r.a.createElement("input",{type:"password",placeholder:"mot de passe",value:u,onChange:function(e){A(e.target.value,"password",m)}}),r.a.createElement("button",{className:"btn ".concat(!y&&"disabled"," signup__validate")},"Valider",r.a.createElement("i",{className:"material-icons left"},"check")),r.a.createElement("p",{className:"signup__switch",onClick:function(){return e.switchMode()}},"D\xe9j\xe0 un compte? Se connecter")))}var q={red:{color:"#F1012C"},orange:{color:"#EE6402"},yellow:{color:"#F8AF28"},green:{color:"#69961F"},blue:{color:"#62A6C4"}};function z(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:q.red},"H"),r.a.createElement("span",{style:q.orange},"e"),r.a.createElement("span",{style:q.yellow},"y"),"\xa0",r.a.createElement("span",{style:q.green},"O"),r.a.createElement("span",{style:q.blue},"h"),"\xa0",r.a.createElement("span",{style:q.red},"L"),r.a.createElement("span",{style:q.orange},"e"),r.a.createElement("span",{style:q.yellow},"t"),r.a.createElement("span",{style:q.green},"'s"),"\xa0",r.a.createElement("span",{style:q.blue},"D"),r.a.createElement("span",{style:q.red},"r"),r.a.createElement("span",{style:q.orange},"a"),r.a.createElement("span",{style:q.yellow},"w"),r.a.createElement("span",{style:q.green},"!"))}var M=a(33),F=a(89),V=a(190),B=a(22),J=new F.a,H=new V.a({uri:"https://esquisse-api.herokuapp.com/graphql"}),K=new M.a({cache:J,link:H});function W(){var e=Object(n.useState)("login"),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(B.a,{client:K},r.a.createElement("div",{className:"auth-page",style:{background:"url(".concat(s.a,")")}},r.a.createElement(v,{className:"auth-page__logo"}),r.a.createElement("h3",{className:"auth-page__title"},"Esquisse Live"),r.a.createElement("div",{className:"auth-page__action"},r.a.createElement("h5",{className:"center"},r.a.createElement(z,null)),"login"===a?r.a.createElement(w,{switchMode:function(){return c("signup")}}):r.a.createElement(R,{switchMode:function(){return c("login")}}))))}var Q=a(18),Z=a(40);function X(){var e=Object(h.a)(["\nquery GetSketchbookInfo($sketchbookId: ID!){\n    getSketchbookInfo(sketchbookId:$sketchbookId){\n        pages{\n            content\n            pageType\n        }\n    }\n}\n"]);return X=function(){return e},e}function Y(){var e=Object(h.a)(["\nquery GetAllSketchbooks($gameId: ID!){\n    getAllSketchbooks(gameId:$gameId){\n        pages{\n            content\n            pageType\n            creator{\n                name\n            }\n        }\n    }\n}\n"]);return Y=function(){return e},e}function ee(){var e=Object(h.a)(["\nquery GetGameInfo($gameId:ID!){\n    getGameInfo(gameId:$gameId){\n      id\n      status\n      turn\n      players{\n        id\n        name\n        icon\n        iconColor\n      }\n      creator\n      sketchbooks{\n        id\n      }\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(h.a)(["\n{\n  userId @client\n}\n"]);return te=function(){return e},e}function ae(){var e=Object(h.a)(["\n{\n    getLastUserGames{\n        id\n        sketchbooks{\n          pages{\n            content\n          }\n        }\n    }\n}\n"]);return ae=function(){return e},e}function ne(){var e=Object(h.a)(["\n{\n    currentUser {\n        id\n        name\n        email\n        icon\n        iconColor\n    }\n  }\n"]);return ne=function(){return e},e}var re=k()(ne()),ce=k()(ae()),le=k()(te()),oe=k()(ee()),ie=k()(Y()),se=k()(X()),ue=(a(284),a(174)),me=a.n(ue),de={loadingWrapper:{display:"flex",alignItems:"center",height:"calc(100vh - 120px)"},loadingImage:{maxWidth:"100%",width:400,margin:"0 auto"}};function pe(){return r.a.createElement("div",{style:de.loadingWrapper},r.a.createElement("img",{src:me.a,alt:"loader",style:de.loadingImage}))}function ge(){var e=Object(h.a)(["\nmutation{\n    createGame{\n        id\n    }\n  }\n"]);return ge=function(){return e},e}var Ee=k()(ge());function fe(){var e=Object(Z.f)(),t=Object(O.b)(Ee,{onCompleted:function(t){var a=t.createGame;e.push("/game/".concat(a.id))}}),a=Object(o.a)(t,2),n=a[0];a[1].createGameData;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Envie de jouer?"),r.a.createElement("button",{onClick:function(){return n()},className:"btn"},"NOUVELLE PARTIE"))}function be(){var e=Object(h.a)(["\nextend type Query {\n  isLoggedIn: Boolean!\n  userId: ID!\n}\n"]);return be=function(){return e},e}function ve(){var e=Object(h.a)(["\n{\n    userId @client\n  }\n"]);return ve=function(){return e},e}function he(){var e=Object(h.a)(["\n{\n    isLoggedIn @client\n  }\n"]);return he=function(){return e},e}var Oe=k()(he()),je=(k()(ve()),k()(be())),Ie=function(e){return function(t){var a=Object(O.c)(Oe).data,n=Object(Z.f)();return a.isLoggedIn?r.a.createElement(e,t):(n.push("/"),r.a.createElement(r.a.Fragment,null))}},ke=a(86),ye=a.n(ke);a(289);function Ne(){var e=Object(O.c)(ce,{fetchPolicy:"network-only"}),t=e.data,a=e.loading;e.error;return r.a.createElement("div",{className:"last-games"},r.a.createElement("p",null,"VOTRE DERNI\xc8RE PARTIE"),r.a.createElement("i",null,"attention les parties sont effac\xe9es toutes les 30mn"),a&&r.a.createElement("div",null,r.a.createElement("img",{className:"last-games__loader",src:ye.a})),t&&t.getLastUserGames.length>0?t.getLastUserGames.map((function(e,t){return r.a.createElement("div",{className:"last-games__game-wrapper",key:t},r.a.createElement(Q.b,{to:"/game/"+e.id},r.a.createElement("div",{className:"last-games__game-border"},r.a.createElement("div",{className:"last-games__title"},r.a.createElement("span",null,"Voir la partie"),r.a.createElement("i",{className:"material-icons"},"remove_red_eye")),r.a.createElement("div",null,e.sketchbooks.map((function(e,t){return r.a.createElement("span",{key:t},0!==t&&" /"," ",e.pages[0].content)}))))))})):r.a.createElement("p",null,"aucune partie disponible"))}var we=Ie((function(){Object(O.a)();var e=Object(O.c)(re),t=e.data,a=e.loading;if(e.error,a)return r.a.createElement(pe,null);var n=t&&t.currentUser;return r.a.createElement("div",{className:"center connected-home"},r.a.createElement("i",{className:"material-icons large connected-home__icon",style:{color:n.iconColor,borderColor:n.iconColor}},n.icon),r.a.createElement("h5",null,"Bienvenue"),r.a.createElement("h4",null,n.name),r.a.createElement("p",null,"Profil"),r.a.createElement(Q.b,{to:"/profile",className:"btn"},"Modifier Mon profil"),r.a.createElement(fe,null),r.a.createElement(Ne,null))})),Se=(a(290),["tag_faces","accessibility","adb","airline_seat_recline_extra","airport_shuttle","album","android","announcement","assistant","attach_file","audiotrack","beach_access","brightness_2","brightness_low","build","bug_report","cake","casino","child_care","content_cut","directions_bike","directions_run","face","favorite_border","grade","hot_tub","local_bar","local_dining","local_florist","mood_bad","rowing","sentiment_neutral","sentiment_very_dissatisfied","smoking_rooms","wc"]);function _e(e){var t=e.selectedIcon,a=e.setIcon;return r.a.createElement("div",{className:"icon-selector"},Se.map((function(e,n){return r.a.createElement("i",{key:n,className:"material-icons small ".concat(t===e&&"selected-icon"),onClick:function(){a(e)}},e)})))}var Ce=a(87),Ae=(a(453),Ie((function(){var e=Object(n.useState)("tag_faces"),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("black-text"),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),p=d[0],g=d[1],E=Object(Z.f)(),f=Object(O.c)(re,{fetchPolicy:"network-only",onCompleted:function(e){g(e.currentUser.name),c(e.currentUser.icon||"tag_faces"),u(e.currentUser.iconColor||"blue-text")}}),b=(f.data,f.loading),v=(f.error,Object(O.b)($,{variables:{name:p,icon:a,iconColor:s},onCompleted:function(e){E.push("/")},refetchQueries:[{query:re}]})),h=Object(o.a)(v,2),j=h[0];h[1].modifyData;return b?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:"container profile"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 center"},r.a.createElement("i",{className:"material-icons large ".concat(s),style:{color:s}},a)),r.a.createElement("div",{className:"col s6"},r.a.createElement("h4",null,"Mon Profil"),r.a.createElement("input",{placeholder:"nom",value:p,onChange:function(e){return g(e.target.value)},maxLength:20})),r.a.createElement("div",null,r.a.createElement("p",null,"Mon avatar"),r.a.createElement(_e,{setIcon:c,selectedIcon:a}),r.a.createElement("p",null,"Couleur"),r.a.createElement(Ce.CirclePicker,{onChange:function(e,t){return u(e.hex)}})),r.a.createElement("div",{className:"center profil__save-btn"},r.a.createElement("button",{className:"btn",onClick:function(){return j()}},"Enregistrer"))))}))),Te=a(191),De=a(177),Ge=a.n(De);a(454);function $e(e){return r.a.createElement("div",{className:"modal-wrapper ".concat(e.open&&"open")},r.a.createElement("div",{className:"sketchbook-display__wrapper modal"},e.children),r.a.createElement("div",{className:"modal-overlay",onClick:function(){return e.closeModal()}}))}a(455);var Le=a(49);function Ue(e){var t=e.sketchbook,a=t.pages[0].creator.name,n=t.pages[0].content,c=t.pages.slice(1);return r.a.createElement("div",null,r.a.createElement("div",{className:""},r.a.createElement("h4",null,n),r.a.createElement("p",null,"propos\xe9 par ",a)),r.a.createElement("div",{className:""},c.map((function(e,t){return"drawing"===e.pageType?r.a.createElement("div",{key:t},r.a.createElement("hr",null),"                                                                ",r.a.createElement("p",null,"Le dessin de ",e.creator.name),r.a.createElement(Le.a,{className:"sketchbook__drawing",disabled:!0,hideGrid:!0,loadTimeOffset:0,saveData:e.content,hideInterface:!0})):r.a.createElement("div",{key:t},r.a.createElement("hr",null),r.a.createElement("p",null,"L'interpr\xe9tation de ",e.creator.name),r.a.createElement("p",null,e.content))}))))}a(458);var xe=function(e){var t=e.gameId,a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],p=Object(O.c)(ie,{variables:{gameId:t}}),g=p.data,E=p.loading;p.error;if(E)return r.a.createElement(pe,null);var f=g&&g.getAllSketchbooks;return r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"NOICE!"),r.a.createElement("p",null,"Le jeu est maintenant termin\xe9."),r.a.createElement("p",null,"D\xe9couvrez ci dessous les performances artistiques de vos amis!"),r.a.createElement("div",null,r.a.createElement(Q.b,{to:"/pdf/"+t},r.a.createElement("button",{className:"btn game-over__pdf-btn"},"Par ici pour la version pdf"))),r.a.createElement("img",{className:"game-over__gif",src:Ge.a,alt:"artist"}),r.a.createElement("div",null,f&&f.map((function(e,t){return r.a.createElement("div",{key:t,className:"game-over__result-bnt-wrapper"},r.a.createElement("button",{className:"btn game-over__result-btn",onClick:function(){i(e),d(!0)}},e.pages[0].creator.name," - ",e.pages[0].content))}))),l&&r.a.createElement($e,{open:m,closeModal:function(){d(!1),i()}},r.a.createElement(Ue,{sketchbook:l})))},Pe=a(189);function Re(e){var t=e.player,a=e.admin;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"collection-item"},r.a.createElement("i",{className:"material-icons",style:{color:t.iconColor}},t.icon),r.a.createElement("span",null,t.name),"  ",a&&r.a.createElement("span",null," - GAME MASTER")))}var qe=a(181);a(462);function ze(e){var t=e.gameId,a=e.players,c=Object(O.b)(P,{variables:{gameId:t,newStatus:"active"}}),l=Object(o.a)(c,2),i=l[0],s=l[1],u=s.loading,m=(s.error,Object(n.useState)(!1)),d=Object(o.a)(m,2),p=d[0],g=d[1];return u?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"admin-controls__share-link"},r.a.createElement("p",null,"Votre partie a bien \xe9t\xe9 cr\xe9\xe9e. Invitez vos amis \xe0 la rejoindre en partageant le lien ci-dessous."),r.a.createElement("p",null,"LIEN A PARTAGER AVEC LES AUTRES JOUEURS (CLIQUEZ POUR COPIER)"),r.a.createElement("p",{className:"admin-control__info"},p&&"lien copi\xe9 dans le presse papier"),r.a.createElement(qe.CopyToClipboard,{text:window.location.href,onCopy:function(){return g(!0)}},r.a.createElement("p",{className:"btn"},window.location.href))),r.a.createElement("div",null,a.length>2?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Pr\xeats \xe0 commencer?"),r.a.createElement("button",{className:"btn",onClick:function(){return i()}},"LANCER LE JEU")):r.a.createElement("p",null,"Un minimum de 3 joueurs est n\xe9cessaire pour lancer le jeu."))))}function Me(e){var t=e.joinGame,a=e.hasJoined,n=e.players,c=e.loading;return r.a.createElement("div",{className:"centered"},a?n.length<3?r.a.createElement("p",null,"Vous avez rejoint la partie, un nombre minimal de 3 joueurs est n\xe9cessaire pour jouer."):r.a.createElement("p",null,"Vous avez rejoint la partie, nous attendons que le game master lance la partie."):c?r.a.createElement("p",null,"Connexion en cours"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Vous avez \xe9t\xe9 invit\xe9 \xe0 jouer \xe0 une partie de esquiss\xe9, cliquez sur le bouton ci dessous pour rejoindre les participants :"),r.a.createElement("button",{onClick:function(){return t()},className:"btn"},"REJOINDRE LA PARTIE")))}function Fe(){var e=Object(h.a)(["\n  subscription TimeToSubmit($gameId: ID!){\n    timeToSubmit(gameId:$gameId){\n      id\n    }\n  }\n"]);return Fe=function(){return e},e}function Ve(){var e=Object(h.a)(["\nsubscription PlayerUpdate($gameId: ID!) {\n  playerUpdate(gameId:$gameId){\n      players{\n          id\n          name\n          icon\n          iconColor\n      }\n      creator\n  }\n}\n"]);return Ve=function(){return e},e}function Be(){var e=Object(h.a)(["\nsubscription GameUpdate($gameId:ID!){\n    gameUpdate(gameId:$gameId){\n      status\n      creator\n      turn\n      players{\n        id\n        name\n        icon\n        iconColor\n      }\n      sketchbooks{\n        id\n      }\n    }\n  }\n"]);return Be=function(){return e},e}var Je=k()(Be()),He=k()(Ve()),Ke=k()(Fe()),We=function(e){var t=e.gameId,a=e.playerslist,c=e.creatorId,l=Object(n.useState)(c),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(Object(Pe.a)(a)),d=Object(o.a)(m,2),p=d[0],g=d[1],E=Object(O.c)(re).data.currentUser,f=Object(O.b)(L,{variables:{gameId:t}}),b=Object(o.a)(f,2),v=b[0],h=b[1],j=h.loading,I=(h.error,Object(O.b)(U,{variables:{gameId:t}})),k=(Object(o.a)(I,1)[0],Object(O.d)(He,{variables:{gameId:t},onSubscriptionData:function(e){e.client;var t=e.subscriptionData;g(t.data.playerUpdate.players),u(t.data.playerUpdate.creator)}})),y=(k.data,k.loadingSub,E.id===s),N=p.map((function(e){return e.id})).indexOf(E.id)>-1;return r.a.createElement("div",null,r.a.createElement("h4",null,"Nouvelle partie"),y&&r.a.createElement(ze,{gameId:t,players:p}),!y&&r.a.createElement(Me,{joinGame:v,loading:j,players:p,hasJoined:N}),r.a.createElement("div",null,r.a.createElement("p",null,"Liste des joueurs connect\xe9s \xe0 cette partie"),p.length>0?r.a.createElement("ul",{className:"collection"},p.map((function(e,t){return r.a.createElement(Re,{key:t,player:e,admin:e.id===s})}))):r.a.createElement("i",null,"Aucun joueur connect\xe9")))},Qe=a(182);function Ze(e){var t=e.timer,a=e.submiter;return r.a.createElement("div",{style:{fontSize:"2rem"}},r.a.createElement(Qe.a,{date:Date.now()+t,renderer:function(e){var t=e.hours,a=e.minutes,n=e.seconds;return r.a.createElement("p",null,r.a.createElement("i",{className:"material-icons small"},"access_alarm"),r.a.createElement("span",null,t,":",a,":",n))},onComplete:function(){return a()}}))}a(463);function Xe(){return r.a.createElement("div",{className:"stopGame"},r.a.createElement("div",{className:"stopGame__content"},r.a.createElement("h4",null,"HAUT LES MAINS"),r.a.createElement("p",null,"Le timer est \xe9coul\xe9 votre r\xe9ponse a \xe9t\xe9 envoy\xe9e. Ne touchez \xe0 rien la page se mettra automatiquement \xe0 jour une fois toutes les r\xe9ponses re\xe7ues."),r.a.createElement("h5",null,"synchronisation de la partie en cours"),r.a.createElement("img",{className:"stopGame__loader",src:ye.a,alt:"gear loader"})),r.a.createElement("div",{className:"stopGame__overlay"}))}var Ye=function(e){return function(t){var a=Object(Z.g)().gameId,c=Object(n.useState)(!1),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),d=m[0],p=m[1];Object(O.d)(Ke,{variables:{gameId:a},onSubscriptionData:function(e){e.client,e.subscriptionData;console.log("TIME TO SUBMIT"),p(!0)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center"},i?r.a.createElement(Xe,null):r.a.createElement(Ze,{timer:t.timer,submiter:function(){return s(!0)}})),r.a.createElement(e,Object.assign({},t,{finished:d})))}},et=(a(464),Ye((function(e){var t=e.lastPage,a=e.finished,c=e.sketchbookId,l=e.gameId,i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(O.b)(x,{variables:{content:u,pageType:"guessing",gameId:l,sketchbookId:c},onCompleted:function(){console.log("PAGE SUBMITTED FOR SKETCHBOOK",c,"with content ",u)}}),p=Object(o.a)(d,2),g=p[0],E=p[1];E.loading,E.error;return window.onbeforeunload=function(){console.log("LEAVING PAGE"),g()},Object(n.useEffect)((function(){a&&g()}),[a]),r.a.createElement("div",{className:"center"},r.a.createElement("p",null,"LE DESSIN A INTERPRETER"),r.a.createElement(Le.a,{className:"guessing-mode__canvas",disabled:!0,hideGrid:!0,loadTimeOffset:0,saveData:t.content,hideInterface:!0}),r.a.createElement("p",null,"Le mot devin\xe9 :"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Je vois je vois...",disabled:a,onChange:function(e){return m(e.target.value)}})))})));function tt(e){var t=e.setBrushColor,a=e.setBrushRadius,n=e.brushRadius;return r.a.createElement("div",{className:"row center drawing-tools"},r.a.createElement("div",{className:"col s12 m8"},r.a.createElement("p",null,"Couleur du crayon"),r.a.createElement(Ce.CirclePicker,{onChange:function(e,a){return t(e.hex)}})),r.a.createElement("div",{className:"col s12 m4"},r.a.createElement("p",null,"Taille du crayon"),r.a.createElement("div",{className:"btn-floating waves-effect waves-light icon ".concat(1===n&&"disabled")},r.a.createElement("i",{className:"material-icons",onClick:function(){return a(n-1)}},"remove")),r.a.createElement("span",{className:"brush-size"},n),r.a.createElement("div",{className:"btn-floating waves-effect waves-light icon ".concat(10===n&&"disabled")},r.a.createElement("i",{className:"material-icons",onClick:function(){return a(n+1)}},"add"))))}a(167);function at(e){var t=e.content;return r.a.createElement("div",{className:"drawing-controls center"},r.a.createElement("div",{className:"waves-effect waves-light btn red",onClick:function(){t.clear()}},r.a.createElement("i",{className:"material-icons left"},"delete_forever"),"Effacer"))}var nt=Ye((function(e){var t=e.lastPage,a=e.finished,c=e.gameId,l=e.sketchbookId,i=Object(n.useState)("#2196f3"),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(2),p=Object(o.a)(d,2),g=p[0],E=p[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),v=b[0],h=b[1],j=Object(O.b)(x,{variables:{content:v&&v.getSaveData(),pageType:"drawing",gameId:c,sketchbookId:l},onCompleted:function(){console.log("PAGE SUBMITTED FOR SKETCHBOOK",l,"with content ",v)}}),I=Object(o.a)(j,2),k=I[0],y=I[1];y.loading,y.error;return window.onbeforeunload=function(){console.log("LEAVING PAGE"),k()},Object(n.useEffect)((function(){a&&k()}),[a]),r.a.createElement("div",null,r.a.createElement("div",{className:"center"},r.a.createElement("p",null,"LE MOT A DESSINER EST"),r.a.createElement("h3",null,t.content)),r.a.createElement(tt,{setBrushColor:m,setBrushRadius:E,content:v,brushRadius:g}),r.a.createElement(at,{content:v}),r.a.createElement(Le.a,{ref:function(e){return h(e)},brushRadius:g,lazyRadius:2,brushColor:u,className:"drawing-mode__canvas",disabled:a,hideGrid:a}))})),rt=Ye((function(e){var t=e.finished,a=e.gameId,c=e.sketchbookId,l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(O.b)(x,{variables:{content:s,pageType:"init",gameId:a,sketchbookId:c},onCompleted:function(){console.log("PAGE SUBMITTED FOR SKETCHBOOK",c,"with content ",s)}}),d=Object(o.a)(m,2),p=d[0],g=d[1];g.loading,g.error;return Object(n.useEffect)((function(){t&&p()}),[t]),window.onbeforeunload=function(){console.log("LEAVING PAGE"),p()},r.a.createElement(r.a.Fragment,null,t?r.a.createElement("p",null,"Votre mot a \xe9t\xe9 enregistr\xe9"):r.a.createElement("p",null,"Indiquez un mot pour commencer la partie"),r.a.createElement("input",{placeholder:"Mot Initial",type:"text",value:s,onChange:function(e){return u(e.target.value)},disabled:t}))})),ct=a(183),lt=a.n(ct);a(465);function ot(e){return r.a.createElement("div",{className:"center submit-mode"},r.a.createElement("h3",null,"Pas si vite l'ami!"),r.a.createElement("p",null,"Apr\xe8s enqu\xeate on dirait bien que vous avez d\xe9j\xe0 envoy\xe9 votre r\xe9ponse..."),r.a.createElement("p",null,"Attendez que tout le monde ai r\xe9pondu pour continuer le jeu, ne touchez \xe0 rien la page se rechargera toute seule."),r.a.createElement("img",{src:lt.a,alt:"detective"}))}var it={init:6e4,drawing:6e4,guessing:6e4,loading:0};function st(e){var t=e.pages,a=e.sketchbookId,n=e.turn,c=Object(Z.g)().gameId,l=t.length>0?t[t.length-1]:{},o=function(){var e="loading";if(0===t.length)e="init";else{if(t.length>0&&t.length<=n)return"drawing"===t[t.length-1].pageType?"guessing":"drawing";e="submitted"}return e}(),i={timer:it[o],gameId:c,sketchbookId:a,lastPage:l};return r.a.createElement("div",null,"init"==o?r.a.createElement(rt,i):"drawing"===o?r.a.createElement(nt,i):"guessing"===o?r.a.createElement(et,i):r.a.createElement(ot,null))}var ut=Ie((function(e){var t=e.gameInfo,a=e.userId,c=t.turn,l=Object(n.useState)({}),i=Object(o.a)(l,2),s=i[0],u=i[1],m=function(){var e="";if(t.players){var n=t.players.map((function(e){return e.id})).indexOf(a)+c,r=t.sketchbooks.length-1,l=n>r?n-r-1:n;e=t.sketchbooks.map((function(e){return e.id}))[l]}return e}(),d=Object(O.c)(se,{variables:{sketchbookId:m},fetchPolicy:"network-only",onCompleted:function(e){var t=e.getSketchbookInfo;u(t.pages)},onError:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}}),p=(d.data,d.loading);d.error;return p?r.a.createElement(pe,null):r.a.createElement("div",{className:"container"},r.a.createElement(st,{pages:s,sketchbookId:m,turn:c}))})),mt=a(184),dt=a.n(mt);function pt(){return r.a.createElement("div",{className:"center"},r.a.createElement("h3",null,"Rien \xe0 voir ici circulez!"),r.a.createElement("p",null,"Cette partie a \xe9t\xe9 abandonn\xe9e vous ne pouvez pas y acc\xe9der."),r.a.createElement("div",null,r.a.createElement("img",{src:dt.a,alt:"stop"})),r.a.createElement(Q.b,{to:"/"},r.a.createElement("button",{className:"btn"},"Revenir \xe0 la civilisation")))}var gt=a(185),Et=a.n(gt),ft={illustration:{width:"100%",maxWidth:300,marginTop:30},marginNull:{margin:0},pageWrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"calc(100vh - 90px)"}};function bt(){return r.a.createElement("div",{class:"center",style:ft.pageWrapper},r.a.createElement("h3",null,"Vous \xeates en retard!"),r.a.createElement("p",null,"Cette partie a d\xe9j\xe0 commenc\xe9 vous ne pouvez plus la rejoindre."),r.a.createElement("p",{style:ft.marginNull}," Attendez la fin pour d\xe9couvrir les r\xe9sultats."),r.a.createElement("img",{style:ft.illustration,src:Et.a,alt:"lapin"}))}var vt=Ie((function(e){var t=Object(Z.g)().gameId,a=Object(n.useState)({}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(O.c)(le).data,u=s&&s.userId,m=Object(O.b)(U,{variables:{gameId:t},refetchQueries:[{query:oe,variables:{gameId:t}}]}),d=Object(o.a)(m,1)[0],p=Object(O.c)(oe,{variables:{gameId:t},onCompleted:function(e){var t=e.getGameInfo;console.log("GET_GAME_INFO ",t),i(t)},fetchPolicy:"network-only",onError:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}}),g=(p.data,p.loading),E=(p.error,Object(O.d)(Je,{variables:{gameId:t},onSubscriptionData:function(e){e.client;var t=e.subscriptionData;console.log("GAME UPDATED INFO ",t.data.gameUpdate),i(Object(Te.a)({},l,{},t.data.gameUpdate))},onError:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}}));E.dataSub,E.loadingSub;if(Object(n.useEffect)((function(){return function(){console.log("LEAVING GAME!"),d()}}),[]),g)return r.a.createElement(pe,null);return r.a.createElement("div",{className:"container"},l&&function(e){var a=e.status;return"new"===a?r.a.createElement(We,{gameId:t,playerslist:l.players,creatorId:l.creator}):"active"===a&&l.players.map((function(e){return e.id})).indexOf(u)>-1?r.a.createElement(ut,{gameInfo:l,userId:u}):"active"===a?r.a.createElement(bt,null):"over"===a?r.a.createElement(xe,{gameId:t,sketchbooks:l.sketchbooks}):"abandonned"==a?r.a.createElement(pt,null):void 0}(l))}));function ht(){var e=Object(O.a)(),t=Object(Z.f)();return r.a.createElement("li",{onClick:function(){e.writeData({data:{isLoggedIn:!1,userId:null}}),localStorage.clear(),window.location.reload(),t.push("/")}},r.a.createElement("a",null,r.a.createElement("i",{className:"material-icons"},"exit_to_app")))}a(466);var Ot=Ie((function(){var e=Object(O.c)(re),t=e.data,a=(e.loading,e.error,t&&t.currentUser.name);return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(Q.b,{to:"/",className:"brand-logo left"},r.a.createElement("span",{className:"nav__title"},"Esquisse Live"),r.a.createElement("i",{className:"material-icons"},"brush")),r.a.createElement("ul",{className:"right nav__right-menu"},r.a.createElement(ht,null),r.a.createElement("span",null,"hello ",a))))}));function jt(e){var t=Object(O.a)(),a=Object(O.c)(re,{onCompleted:function(e){var a=e.currentUser;t.writeData({data:{userId:a.id}})}});a.data,a.loading,a.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,null),r.a.createElement("div",null,e.children))}var It=a(168),kt=a(170),yt=a(186),Nt=a(188);a(467);function wt(){var e=Object(Z.g)().gameId,t=Object(O.c)(ie,{variables:{gameId:e}}),a=t.data,n=t.loading;t.error;return n?r.a.createElement(pe,null):r.a.createElement("div",{className:"pdf-format center container"},r.a.createElement("h4",null,"Une si belle partie!"),r.a.createElement("h5",null,"avec la participation de  ",a&&a.getAllSketchbooks.map((function(e,t){return r.a.createElement("span",{key:t}," ",e.pages[0].creator.name," ")}))),r.a.createElement("p",null,"cliquez sur options/imprimer/version-pdf dans votre navigateur pour garder un souvenir"),a&&a.getAllSketchbooks.map((function(e,t){return r.a.createElement("div",{key:t,className:"pdf-format__sketchbook"},r.a.createElement("h4",null,"carnet n\xb0",t+1),r.a.createElement(Ue,{sketchbook:e}))})))}var St=new F.a,_t=new It.a({headers:{authorization:localStorage.getItem("esquisse-token")},uri:"https://esquisse-api.herokuapp.com/graphql"}),Ct=new Nt.a({uri:"ws://esquisse-api.herokuapp.com/graphql",options:{reconnect:!0}}),At=Object(kt.a)((function(e){var t=e.query,a=Object(yt.a)(t);return"OperationDefinition"===a.kind&&"subscription"===a.operation}),Ct,_t),Tt=new M.a({cache:St,link:At,credentials:"include",localType:je,resolvers:{},dataIdFromObject:function(e){return e.id}});function Dt(){return r.a.createElement(B.a,{client:Tt},r.a.createElement(Q.a,null,r.a.createElement(jt,null,r.a.createElement(Z.c,null,r.a.createElement(Z.a,{path:"/",exact:!0},r.a.createElement(we,null)),r.a.createElement(Z.a,{path:"/profile"},r.a.createElement(Ae,null)),r.a.createElement(Z.a,{path:"/game/:gameId"},r.a.createElement(vt,null)),r.a.createElement(Z.a,{path:"/pdf/:gameId"},r.a.createElement(wt,null))))))}function Gt(){return localStorage.getItem("esquisse-token")?r.a.createElement(Dt,null):r.a.createElement(W,null)}St.writeData({data:{isLoggedIn:!!localStorage.getItem("esquisse-token")}});var $t=function(){return r.a.createElement(Gt,null)};l.a.render(r.a.createElement($t,null),document.querySelector("#root"))},86:function(e,t,a){e.exports=a.p+"static/media/gearLoader.b5d684c5.gif"}},[[200,1,2]]]);
//# sourceMappingURL=main.9f5ea2cb.chunk.js.map